name: IAR Workflow

on:
  push:
  workflow_dispatch:

jobs:
  build:
    name: Build with IAR
    strategy:
      matrix:
        project: [Zephyr, PX5]
        arch: [Arm, RISC-V, RL78]
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v4
    - run: |
        echo "IAR ANSI C/C++ Compiler V9.70.1 for ${{ matrix.arch }}"
        sleep $((45 + RANDOM % 46))

  verify:
    needs: build
    name: Verify with IAR
    strategy:
      matrix:
        project: [Zephyr, PX5]
        arch: [Arm, RISC-V, RL78]
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v4
    - run: |
        echo "IAR C-STAT Command Line Interface V2.7.5.559"
        sleep $((65 + RANDOM % 26))

  deploy:
    needs: verify
    name: Deploy with IAR
    strategy:
      matrix:
        project: [Zephyr, PX5]
        arch: [Arm, RISC-V, RL78]
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v4
    - run: |
        echo "IAR C-SPY Command Line Utility V9.3.7.1266"
        sleep $((15 + RANDOM % 26))
